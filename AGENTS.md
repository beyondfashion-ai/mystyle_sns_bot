# mystyle_sns_bot - Codex Agent Instructions

## Language Rule (HIGHEST PRIORITY)
- **Think in English, explain in Korean**: Internal analysis in English, user-facing explanations in Korean.

## Auto-commit Rule (IMPORTANT)
- After completing code changes, **always auto-commit**. Do not ask the user.
- Commit immediately regardless of build/install status.

## Build & Install Rule (IMPORTANT)
- **Only build/install when the user explicitly requests it.** Do not auto-build after code changes.

---

## Project Summary

mystyleKPOP SNS automation bot. Posts AI fashion K-POP magazine content to X(Twitter) and Instagram automatically.
Brand positioning: "Global AI Fashion K-POP Magazine" driving traffic to `my-style.ai`.

## Tech Stack

- **Language:** JavaScript (ES Modules, `"type": "module"` in package.json)
- **Runtime:** Node.js
- **Dependencies:**
  - `twitter-api-v2` - X(Twitter) API client
  - `node-fetch` - HTTP requests
  - `firebase-admin` - Firebase integration
  - `node-cron` - Scheduling
  - `express` - HTTP server
  - `dotenv` - Environment variables

## Project Structure

```
src/bot.js          # Core SNS posting logic (postToSNS function)
scripts/test.js     # Integration test script
docs/               # Strategy documents (Korean)
  master_proposal.md    # Master plan
  content_strategy.md   # Content strategy
  automation_plan.md    # Automation execution plan
  walkthrough.md        # Implementation walkthrough
guidelines/         # Safety and compliance guidelines (Korean)
  legal_compliance.md       # Legal/compliance rules
  ip_strategy.md            # IP/publicity rights (Vibe-Alike rules)
  kpop_expert_guidelines.md # K-POP fandom culture context
```

## Code Conventions

- Pure JavaScript with ES Module syntax (`import`/`export`), NOT TypeScript
- Async/await for all asynchronous operations
- Environment variables via `dotenv` - never hardcode secrets
- No CommonJS (`require`/`module.exports`)

## Commands

```bash
npm install    # Install dependencies
npm start      # Run bot (node src/bot.js)
npm test       # Run tests (node scripts/test.js)
```

## Critical Safety Rules

These rules are NON-NEGOTIABLE and must be preserved in all code changes:

1. **Bot Disclosure:** Every post MUST include `(Generated by mystyleKPOP AI)` footer
2. **Rate Limiting:** X posts limited to 5/hour, 30/day per user
3. **URL Validation:** Instagram image URLs must be verified as publicly accessible before posting
4. **No Face Cloning:** AI images must use "Vibe-Alike" virtual models, never 1:1 artist face replication
5. **Editorial Disclaimer:** All content must be labeled as AI-generated fan-art editorial

## Environment Variables

Required in `.env` (see `.env.example`):
- `X_API_KEY`, `X_API_SECRET_KEY`, `X_ACCESS_TOKEN`, `X_ACCESS_TOKEN_SECRET`
- `INSTAGRAM_BUSINESS_ACCOUNT_ID`, `INSTAGRAM_ACCESS_TOKEN`

## Known Bugs

None currently.
