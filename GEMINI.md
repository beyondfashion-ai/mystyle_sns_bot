# mystyle_sns_bot - Gemini Instructions

## Language Rule (HIGHEST PRIORITY)
- **Think in English, explain in Korean**: 내부 사고/분석은 영어로, 사용자에게 작업 완료 설명은 한글로.

## Auto-commit Rule (IMPORTANT)
- 코드 수정 작업이 완료되면 **항상 자동으로 git commit**. 사용자에게 묻지 않음.

## Build & Install Rule (IMPORTANT)
- **빌드/설치는 사용자가 요청할 때만** 실행. 코드 수정 후 자동으로 빌드하지 않음.

---

## 프로젝트 개요

mystyleKPOP SNS 자동화 봇.
X(Twitter)와 Instagram에 AI 패션 K-POP 매거진 콘텐츠를 자동 게시하는 Node.js 프로젝트.
"글로벌 AI 패션 K-POP 매거진" 브랜드로 `my-style.ai` 서비스 유입이 최종 목표.

## 기술 스택

- JavaScript (ES Modules) / Node.js
- twitter-api-v2 (X API), Instagram Graph API (REST fetch)
- firebase-admin, node-cron, express, dotenv

## 디렉토리 구조

- `src/bot.js` - 핵심 SNS 게시 함수 (`postToSNS`)
- `scripts/test.js` - 통합 테스트
- `docs/` - 기획서, 콘텐츠 전략, 자동화 계획, 워크스루
- `guidelines/` - 법률, IP 전략, K-POP 전문가 가이드라인

## 코딩 규칙

- 순수 JavaScript 사용. TypeScript 문법(타입 어노테이션 등) 사용 금지
- ES Module (`import`/`export`) 전용. CommonJS 사용 금지
- 비동기 처리는 async/await
- 환경 변수는 `.env`로 관리. 코드에 시크릿 하드코딩 절대 금지

## 실행 명령어

```bash
npm install    # 의존성 설치
npm start      # 봇 실행
npm test       # 테스트
```

## 필수 안전 규칙 (코드 수정 시 반드시 유지)

1. **봇 고지:** 모든 게시물 하단에 `(Generated by mystyleKPOP AI)` 자동 삽입
2. **속도 제한:** X 게시 시간당 5회, 일일 30회 제한
3. **URL 검증:** Instagram 이미지 URL의 공개 접근성 사전 검증
4. **얼굴 복제 금지:** Vibe-Alike 가상 모델만 사용, 아티스트 얼굴 1:1 복제 금지
5. **면책 고지:** AI 생성 콘텐츠/팬아트적 재해석임을 명시

## 환경 변수 (.env.example 참조)

```
X_API_KEY, X_API_SECRET_KEY, X_ACCESS_TOKEN, X_ACCESS_TOKEN_SECRET
INSTAGRAM_BUSINESS_ACCOUNT_ID, INSTAGRAM_ACCESS_TOKEN
```

## 참조 문서

- `guidelines/legal_compliance.md` - 법률 및 컴플라이언스 정책
- `guidelines/ip_strategy.md` - IP/초상권 보호 (Vibe-Alike 규칙 상세)
- `guidelines/kpop_expert_guidelines.md` - K-POP 팬덤 문화와 커뮤니티 톤
- `docs/automation_plan.md` - 자동화 안전장치 기술 스펙

## 알려진 이슈

- `src/bot.js:12` TypeScript 타입 어노테이션이 .js 파일에 존재 (수정 필요)
- Rate limiter 변수 선언만 되고 게시 로직에 미적용
